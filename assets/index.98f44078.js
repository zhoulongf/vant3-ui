import{O as Q,e,z as b,A as L,x as G,Y as j,D as ee,q as Y,B as Z,J as te,E as ne,r as P,o as H,c as ie,w as C,a as I,b as re,d as ae,t as q,F as le}from"./vue-libs.6baccb04.js";import{c as A,l as K,K as se,w as V,k as $,t as oe,Y as J,g as de,R as ce,H as N,W as ue,n as fe,e as he,p as ge,Z as xe}from"./use-touch.8d051f2d.js";import{L as O}from"./index.29230a7e.js";import{_ as me}from"./iframe-router.12859c05.js";const pe=Symbol(),ye=()=>Q(pe,null),c=t=>`van-empty-${t}`,o=t=>`url(#${c(t)})`,h=(t,n,a)=>e("stop",{"stop-color":t,offset:`${n}%`,"stop-opacity":a},null),F=(t,n)=>[h(t,0),h(n,100)],W=t=>[e("defs",null,[e("radialGradient",{id:c(t),cx:"50%",cy:"54%",fx:"50%",fy:"54%",r:"297%",gradientTransform:"matrix(-.16 0 0 -.33 .58 .72)"},[h("#EBEDF0",0),h("#F2F3F5",100,.3)])]),e("ellipse",{fill:o(t),opacity:".8",cx:"80",cy:"140",rx:"46",ry:"8"},null)],M=()=>[e("defs",null,[e("linearGradient",{id:c("a"),x1:"64%",y1:"100%",x2:"64%"},[h("#FFF",0,.5),h("#F2F3F5",100)])]),e("g",{opacity:".8"},[e("path",{d:"M36 131V53H16v20H2v58h34z",fill:o("a")},null),e("path",{d:"M123 15h22v14h9v77h-31V15z",fill:o("a")},null)])],z=()=>[e("defs",null,[e("linearGradient",{id:c("b"),x1:"64%",y1:"97%",x2:"64%",y2:"0%"},[h("#F2F3F5",0,.3),h("#F2F3F5",100)])]),e("g",{opacity:".8"},[e("path",{d:"M87 6c3 0 7 3 8 6a8 8 0 1 1-1 16H80a7 7 0 0 1-8-6c0-4 3-7 6-7 0-5 4-9 9-9Z",fill:o("b")},null),e("path",{d:"M19 23c2 0 3 1 4 3 2 0 4 2 4 4a4 4 0 0 1-4 3v1h-7v-1l-1 1c-2 0-3-2-3-4 0-1 1-3 3-3 0-2 2-4 4-4Z",fill:o("b")},null)])],ve=()=>e("svg",{viewBox:"0 0 160 160"},[e("defs",null,[e("linearGradient",{id:c(1),x1:"64%",y1:"100%",x2:"64%"},[h("#FFF",0,.5),h("#F2F3F5",100)]),e("linearGradient",{id:c(2),x1:"50%",x2:"50%",y2:"84%"},[h("#EBEDF0",0),h("#DCDEE0",100,0)]),e("linearGradient",{id:c(3),x1:"100%",x2:"100%",y2:"100%"},[F("#EAEDF0","#DCDEE0")]),e("radialGradient",{id:c(4),cx:"50%",cy:"0%",fx:"50%",fy:"0%",r:"100%",gradientTransform:"matrix(0 1 -.54 0 .5 -.5)"},[h("#EBEDF0",0),h("#FFF",100,0)])]),e("g",{fill:"none"},[M(),e("path",{fill:o(4),d:"M0 139h160v21H0z"},null),e("path",{d:"M80 54a7 7 0 0 1 3 13v27l-2 2h-2a2 2 0 0 1-2-2V67a7 7 0 0 1 3-13z",fill:o(2)},null),e("g",{opacity:".6","stroke-linecap":"round","stroke-width":"7"},[e("path",{d:"M64 47a19 19 0 0 0-5 13c0 5 2 10 5 13",stroke:o(3)},null),e("path",{d:"M53 36a34 34 0 0 0 0 48",stroke:o(3)},null),e("path",{d:"M95 73a19 19 0 0 0 6-13c0-5-2-9-6-13",stroke:o(3)},null),e("path",{d:"M106 84a34 34 0 0 0 0-48",stroke:o(3)},null)]),e("g",{transform:"translate(31 105)"},[e("rect",{fill:"#EBEDF0",width:"98",height:"34",rx:"2"},null),e("rect",{fill:"#FFF",x:"9",y:"8",width:"80",height:"18",rx:"1.1"},null),e("rect",{fill:"#EBEDF0",x:"15",y:"12",width:"18",height:"6",rx:"1.1"},null)])])]),Fe=()=>e("svg",{viewBox:"0 0 160 160"},[e("defs",null,[e("linearGradient",{x1:"50%",x2:"50%",y2:"100%",id:c(5)},[F("#F2F3F5","#DCDEE0")]),e("linearGradient",{x1:"95%",y1:"48%",x2:"5.5%",y2:"51%",id:c(6)},[F("#EAEDF1","#DCDEE0")]),e("linearGradient",{y1:"45%",x2:"100%",y2:"54%",id:c(7)},[F("#EAEDF1","#DCDEE0")])]),M(),z(),e("g",{transform:"translate(36 50)",fill:"none"},[e("g",{transform:"translate(8)"},[e("rect",{fill:"#EBEDF0",opacity:".6",x:"38",y:"13",width:"36",height:"53",rx:"2"},null),e("rect",{fill:o(5),width:"64",height:"66",rx:"2"},null),e("rect",{fill:"#FFF",x:"6",y:"6",width:"52",height:"55",rx:"1"},null),e("g",{transform:"translate(15 17)",fill:o(6)},[e("rect",{width:"34",height:"6",rx:"1"},null),e("path",{d:"M0 14h34v6H0z"},null),e("rect",{y:"28",width:"34",height:"6",rx:"1"},null)])]),e("rect",{fill:o(7),y:"61",width:"88",height:"28",rx:"1"},null),e("rect",{fill:"#F7F8FA",x:"29",y:"72",width:"30",height:"6",rx:"1"},null)])]),Ee=()=>e("svg",{viewBox:"0 0 160 160"},[e("defs",null,[e("linearGradient",{x1:"50%",x2:"50%",y2:"100%",id:c(8)},[F("#EAEDF1","#DCDEE0")])]),M(),z(),W("c"),e("path",{d:"m59 60 21 21 21-21h3l9 9v3L92 93l21 21v3l-9 9h-3l-21-21-21 21h-3l-9-9v-3l21-21-21-21v-3l9-9h3Z",fill:o(8)},null)]),Te=()=>e("svg",{viewBox:"0 0 160 160"},[e("defs",null,[e("linearGradient",{x1:"50%",y1:"100%",x2:"50%",id:c(9)},[F("#EEE","#D8D8D8")]),e("linearGradient",{x1:"100%",y1:"50%",y2:"50%",id:c(10)},[F("#F2F3F5","#DCDEE0")]),e("linearGradient",{x1:"50%",x2:"50%",y2:"100%",id:c(11)},[F("#F2F3F5","#DCDEE0")]),e("linearGradient",{x1:"50%",x2:"50%",y2:"100%",id:c(12)},[F("#FFF","#F7F8FA")])]),M(),z(),W("d"),e("g",{transform:"rotate(-45 113 -4)",fill:"none"},[e("rect",{fill:o(9),x:"24",y:"52.8",width:"5.8",height:"19",rx:"1"},null),e("rect",{fill:o(10),x:"22.1",y:"67.3",width:"9.9",height:"28",rx:"1"},null),e("circle",{stroke:o(11),"stroke-width":"8",cx:"27",cy:"27",r:"27"},null),e("circle",{fill:o(12),cx:"27",cy:"27",r:"16"},null),e("path",{d:"M37 7c-8 0-15 5-16 12",stroke:o(11),"stroke-width":"3",opacity:".5","stroke-linecap":"round",transform:"rotate(45 29 13)"},null)])]),[De,B]=A("empty"),U={error:Ee,search:Te,network:ve,default:Fe},Se={image:K("default"),imageSize:[Number,String,Array],description:String};var _e=b({name:De,props:Se,setup(t,{slots:n}){const a=()=>{var s;return n.image?n.image():((s=U[t.image])==null?void 0:s.call(U))||e("img",{src:t.image},null)},l=()=>{const s=n.description?n.description():t.description;if(s)return e("p",{class:B("description")},[s])},d=()=>{if(n.default)return e("div",{class:B("bottom")},[n.default()])};return()=>e("div",{class:B()},[e("div",{class:B("image"),style:se(t.imageSize)},[a()]),l(),d()])}});const ke=V(_e),[we,T,Be]=A("list"),Le={error:Boolean,offset:$(300),loading:Boolean,finished:Boolean,errorText:String,direction:K("down"),loadingText:String,finishedText:String,immediateCheck:oe};var $e=b({name:we,props:Le,emits:["load","update:error","update:loading"],setup(t,{emit:n,slots:a}){const l=L(!1),d=L(),s=L(),r=ye(),g=J(d),x=()=>{Y(()=>{if(l.value||t.finished||t.error||(r==null?void 0:r.value)===!1)return;const{offset:u,direction:E}=t,v=N(g);if(!v.height||ue(d))return;let D=!1;const w=N(s);E==="up"?D=v.top-w.top<=u:D=w.bottom-v.bottom<=u,D&&(l.value=!0,n("update:loading",!0),n("load"))})},m=()=>{if(t.finished){const u=a.finished?a.finished():t.finishedText;if(u)return e("div",{class:T("finished-text")},[u])}},y=()=>{n("update:error",!1),x()},p=()=>{if(t.error){const u=a.error?a.error():t.errorText;if(u)return e("div",{role:"button",class:T("error-text"),tabindex:0,onClick:y},[u])}},k=()=>{if(l.value&&!t.finished)return e("div",{class:T("loading")},[a.loading?a.loading():e(O,{class:T("loading-icon")},{default:()=>[t.loadingText||Be("loading")]})])};return G(()=>[t.loading,t.finished,t.error],x),r&&G(r,u=>{u&&x()}),j(()=>{l.value=t.loading}),ee(()=>{t.immediateCheck&&x()}),de({check:x}),ce("scroll",x,{target:g}),()=>{var u;const E=(u=a.default)==null?void 0:u.call(a),v=e("div",{ref:s,class:T("placeholder")},null);return e("div",{ref:d,role:"feed",class:T(),"aria-busy":l.value},[t.direction==="down"?E:v,k(),m(),p(),t.direction==="up"?E:v])}}});const be=V($e),[Me,_,Pe]=A("pull-refresh"),X=50,He=["pulling","loosing","success"],Ce={disabled:Boolean,modelValue:Boolean,headHeight:$(X),successText:String,pullingText:String,loosingText:String,loadingText:String,pullDistance:fe,successDuration:$(500),animationDuration:$(300)};var Ge=b({name:Me,props:Ce,emits:["change","refresh","update:modelValue"],setup(t,{emit:n,slots:a}){let l;const d=L(),s=J(d),r=Z({status:"normal",distance:0,duration:0}),g=he(),x=()=>{if(t.headHeight!==X)return{height:`${t.headHeight}px`}},m=()=>r.status!=="loading"&&r.status!=="success"&&!t.disabled,y=i=>{const f=+(t.pullDistance||t.headHeight);return i>f&&(i<f*2?i=f+(i-f)/2:i=f*1.5+(i-f*2)/4),Math.round(i)},p=(i,f)=>{const S=+(t.pullDistance||t.headHeight);r.distance=i,f?r.status="loading":i===0?r.status="normal":i<S?r.status="pulling":r.status="loosing",n("change",{status:r.status,distance:i})},k=()=>{const{status:i}=r;return i==="normal"?"":t[`${i}Text`]||Pe(i)},u=()=>{const{status:i,distance:f}=r;if(a[i])return a[i]({distance:f});const S=[];return He.includes(i)&&S.push(e("div",{class:_("text")},[k()])),i==="loading"&&S.push(e(O,{class:_("loading")},{default:k})),S},E=()=>{r.status="success",setTimeout(()=>{p(0)},+t.successDuration)},v=i=>{l=xe(s.value)===0,l&&(r.duration=0,g.start(i))},D=i=>{m()&&v(i)},w=i=>{if(m()){l||v(i);const{deltaY:f}=g;g.move(i),l&&f.value>=0&&g.isVertical()&&(ge(i),p(y(f.value)))}},R=()=>{l&&g.deltaY.value&&m()&&(r.duration=+t.animationDuration,r.status==="loosing"?(p(+t.headHeight,!0),n("update:modelValue",!0),Y(()=>n("refresh"))):p(0))};return G(()=>t.modelValue,i=>{r.duration=+t.animationDuration,i?p(+t.headHeight,!0):a.success||t.successText?E():p(0,!1)}),()=>{var i;const f={transitionDuration:`${r.duration}ms`,transform:r.distance?`translate3d(0,${r.distance}px, 0)`:""};return e("div",{ref:d,class:_()},[e("div",{class:_("track"),style:f,onTouchstart:D,onTouchmove:w,onTouchend:R,onTouchcancel:R},[e("div",{class:_("head"),style:x()},[u()]),(i=a.default)==null?void 0:i.call(a)])])}}});const Ae=V(Ge);function Ve(t){return!!t&&(typeof t=="object"||typeof t=="function")&&typeof t.then=="function"}var ze=b({name:"List",props:{autoLoad:{type:Boolean,default:!0,required:!1},getList:{type:Function,default:()=>{},required:!0},emptyText:{type:String,default:"\u6682\u65E0\u6570\u636E",required:!1},noMoreText:{type:String,default:"\u6CA1\u6709\u66F4\u591A\u4E86",required:!1},errorText:{type:String,default:"\u8BF7\u6C42\u5931\u8D25\uFF0C\u70B9\u51FB\u91CD\u65B0\u52A0\u8F7D",required:!1}},setup(t){const n=Z({refreshing:!1,loading:!1,finished:!1,finishedText:t.noMoreText,error:!1,pageIndex:1,pageSize:10,count:0,list:[],isEmpty:!1});function a(){const{pageIndex:s,pageSize:r}=n,g=t.getList({pageIndex:s,pageSize:r});Ve(g)&&g.then(x=>{const{list:m,count:y}=x;n.refreshing&&(n.list=[],n.refreshing=!1),y<=0?(n.finished=!0,n.finishedText=t.emptyText,n.isEmpty=!0):(n.isEmpty=!1,n.finishedText=t.noMoreText,m&&m.length>0?(s===1?n.list=m:n.list=n.list.concat(m),n.pageSize*n.pageIndex>=y?n.finished=!0:n.pageIndex++):n.finished=!0)}).catch(()=>{n.error=!0}).finally(()=>{n.loading=!1})}function l(){n.error=!1,n.loading?n.refreshing=!1:(n.finished=!1,n.loading=!0,n.pageIndex=1,a())}function d(){l()}return{...te(n),handleRefresh:l,handleListLoad:a,resetPage:d}},render(){const{autoLoad:t,errorText:n,emptyText:a}=this.$.props,{finished:l,finishedText:d,isEmpty:s}=this;return e(Ae,{modelValue:this.refreshing,"onUpdate:modelValue":r=>this.refreshing=r,onRefresh:this.handleRefresh},{default:()=>[s?this.$slots.empty?this.$slots.empty:e(ke,{description:a},null):e(be,ne({modelValue:this.loading,"onUpdate:modelValue":r=>this.loading=r,immediateCheck:t,finished:l,finishedText:d,error:this.error,errorText:n},{on:{"update:error":()=>{this.error=!1}}},{onLoad:this.handleListLoad}),{default:()=>[this.$slots.list&&this.$slots.list({list:this.list})]})]})}});const Re={name:"ListDemo",components:{cmList:ze},setup(){return{getList:({pageIndex:n})=>new Promise((a,l)=>{setTimeout(()=>{if(n===3)l(new Error("\u5931\u8D25"));else{const d=[];for(let s=0;s<10;s++)d.push({pageIndex:n,index:s});a({list:d,count:25})}},1e3)})}}},Ie={class:"list-cell"};function qe(t,n,a,l,d,s){const r=P("cm-list"),g=P("demo-block"),x=P("demo-section");return H(),ie(x,null,{default:C(()=>[e(g,{title:"\u57FA\u7840\u7528\u6CD5"},{default:C(()=>[e(r,{"get-list":l.getList},{list:C(({list:m})=>[(H(!0),I(le,null,re(m,(y,p)=>(H(),I("div",{key:p},[ae("div",Ie," \u5B50\u5143\u7D20"+q(y.pageIndex)+"-"+q(y.index),1)]))),128))]),_:1},8,["get-list"])]),_:1})]),_:1})}var Ke=me(Re,[["render",qe]]);export{Ke as default};
